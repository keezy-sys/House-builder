<!doctype html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hausplaner</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div id="auth-screen" class="auth-screen" hidden>
      <div class="auth-card">
        <h2>Willkommen zurück</h2>
        <p class="helper">
          Bitte anmelden, um den Hausplan gemeinsam zu bearbeiten.
        </p>
        <div class="auth-forms">
          <form id="login-form" class="auth-form">
            <h3>Anmelden</h3>
            <label>
              E-Mail
              <input
                type="email"
                name="email"
                required
                autocomplete="email"
              />
            </label>
            <label>
              Passwort
              <input
                type="password"
                name="password"
                required
                autocomplete="current-password"
              />
            </label>
            <button class="primary" type="submit">Anmelden</button>
          </form>
          <div class="auth-divider"><span>oder</span></div>
          <form id="signup-form" class="auth-form">
            <h3>Neues Konto</h3>
            <label>
              Name
              <input type="text" name="name" required autocomplete="name" />
            </label>
            <label>
              E-Mail
              <input
                type="email"
                name="email"
                required
                autocomplete="email"
              />
            </label>
            <label>
              Passwort
              <input
                type="password"
                name="password"
                required
                autocomplete="new-password"
              />
            </label>
            <button type="submit">Konto anlegen</button>
          </form>
        </div>
        <p id="auth-error" class="helper" role="alert"></p>
      </div>
    </div>

    <header class="app-header">
      <div>
        <h1>Hausplaner</h1>
        <p class="subtitle">
          Einfacher Grundriss, klare Checklisten und gute Zusammenarbeit.
        </p>
      </div>
      <div class="header-actions">
        <label class="toggle">
          <input type="checkbox" id="toggle-architect" />
          <span>Architekt-Ansicht</span>
        </label>
        <div class="auth-info" id="auth-info" hidden>
          <div class="auth-user">
            <span class="auth-label">Angemeldet als</span>
            <span id="auth-user-name"></span>
          </div>
          <button id="sign-out" type="button">Abmelden</button>
        </div>
      </div>
    </header>

    <main class="app">
      <section class="floorplan" aria-label="Grundriss">
        <div class="floorplan-header">
          <div class="floorplan-copy">
            <h2>2D-Grundriss</h2>
            <p id="floorplan-hint">
              Bewegen Sie die Maus über einen Raum, um ihn hervorzuheben.
            </p>
          </div>
          <div class="floor-switch" aria-label="Etage auswählen">
            <span class="floor-switch__label">Etage</span>
            <div class="floor-switch__control">
              <span>EG</span>
              <input
                type="range"
                id="floor-toggle"
                min="0"
                max="1"
                step="1"
                value="0"
                aria-label="Etage wechseln"
              />
              <span>OG</span>
            </div>
            <span id="floor-label" class="floor-switch__value"
              >Erdgeschoss</span
            >
          </div>
        </div>
        <div class="floorplan-wrapper">
          <svg
            id="floorplan"
            viewBox="0 0 800 520"
            role="img"
            aria-labelledby="floorplan-title"
          >
            <title id="floorplan-title">Interaktiver Grundriss</title>
          </svg>
        </div>
        <div class="legend">
          <span class="legend-item">
            <svg
              class="legend-icon"
              viewBox="0 0 36 12"
              aria-hidden="true"
            >
              <line class="legend-wall" x1="4" y1="6" x2="32" y2="6" />
            </svg>
            Wand
          </span>
          <span class="legend-item">
            <svg
              class="legend-icon"
              viewBox="0 0 36 24"
              aria-hidden="true"
            >
              <line
                class="legend-door-frame"
                x1="6"
                y1="6"
                x2="20"
                y2="6"
              />
              <line
                class="legend-door-leaf"
                x1="6"
                y1="6"
                x2="6"
                y2="20"
              />
              <path
                class="legend-door-arc"
                d="M 20 6 A 14 14 0 0 1 6 20"
              />
            </svg>
            Tür
          </span>
          <span class="legend-item">
            <svg
              class="legend-icon"
              viewBox="0 0 36 12"
              aria-hidden="true"
            >
              <line
                class="legend-window-line"
                x1="4"
                y1="4"
                x2="32"
                y2="4"
              />
              <line
                class="legend-window-line"
                x1="4"
                y1="8"
                x2="32"
                y2="8"
              />
              <line
                class="legend-window-cross"
                x1="18"
                y1="4"
                x2="18"
                y2="8"
              />
            </svg>
            Fenster
          </span>
        </div>
        <div class="floorplan-actions">
          <button id="add-comment" class="primary" type="button">
            Kommentar hinzufügen
          </button>
          <button id="clear-selection" type="button">Auswahl löschen</button>
        </div>
      </section>

      <aside class="sidebar" aria-label="Raumdetails">
        <section class="panel" id="room-panel">
          <h2 id="room-title">Bitte wählen Sie einen Raum</h2>
          <p id="room-subtitle">
            Klicken Sie auf einen Raum im Grundriss, um Details zu sehen.
          </p>
        </section>

        <section class="panel" id="three-d-panel" hidden>
          <div class="panel-header">
            <h3>3D-Ansicht</h3>
            <button id="toggle-3d" type="button">Öffnen</button>
          </div>
          <p id="three-d-label" class="helper">3D-Ansicht für den Raum</p>
          <div class="three-d-scene">
            <div class="three-d-box">
              <div class="face front"></div>
              <div class="face back"></div>
              <div class="face right"></div>
              <div class="face left"></div>
              <div class="face top"></div>
            </div>
          </div>
        </section>

        <section class="panel">
          <h3>Checkliste</h3>
          <ul id="checklist" class="checklist"></ul>
          <form id="checklist-form" class="form-row">
            <input
              type="text"
              id="checklist-input"
              placeholder="Material oder Aufgabe hinzufügen"
            />
            <button type="submit" class="primary">Hinzufügen</button>
          </form>
        </section>

        <section class="panel">
          <h3>Raumbilder</h3>
          <div id="image-gallery" class="image-gallery"></div>
          <div class="button-row">
            <button id="generate-image" class="primary" type="button">
              Mit ChatGPT erzeugen
            </button>
            <label class="upload-btn">
              Foto hochladen
              <input type="file" id="upload-image" accept="image/*" />
            </label>
            <button id="set-api-key" type="button">API-Schlüssel setzen</button>
          </div>
          <p id="image-status" class="helper"></p>
          <p class="helper">Tipp: mehrere Blickwinkel pro Raum speichern.</p>
        </section>

        <section class="panel">
          <h3>Kommentare</h3>
          <ul id="comments" class="comments"></ul>
        </section>
      </aside>
    </main>

    <section id="architect-view" class="architect-view" hidden>
      <h2>Architekt-Ansicht</h2>
      <p>
        Ziehen Sie Wände, Türen und Fenster direkt im Grundriss. Öffnungen
        rasten an Wänden ein. Klicken Sie ein Element, um Maße feinzujustieren.
      </p>

      <div class="architect-panel">
        <h3 id="architect-title">Element wählen</h3>
        <form id="measurement-form" class="measurement-form" hidden>
          <label>
            <span id="measure-axis-label">X-Position der Wand (mm)</span>
            <div class="measurement-row">
              <input type="range" id="measure-axis" min="0" max="10000" />
              <input
                type="number"
                id="measure-axis-number"
                min="0"
                max="10000"
                step="20"
                required
              />
            </div>
          </label>
          <label>
            <span id="measure-span-label">Y-Länge der Wand (mm)</span>
            <div class="measurement-row">
              <input type="range" id="measure-span" min="0" max="10000" />
              <input
                type="number"
                id="measure-span-number"
                min="0"
                max="10000"
                step="20"
                required
              />
            </div>
          </label>
          <label id="measure-height-row">
            <span id="measure-height-label">Öffnungshöhe (mm)</span>
            <div class="measurement-row">
              <input type="range" id="measure-height" min="0" max="3000" />
              <input
                type="number"
                id="measure-height-number"
                min="0"
                max="3000"
                step="10"
                required
              />
            </div>
          </label>
          <label id="measure-swing-row" class="measurement-toggle">
            <input type="checkbox" id="measure-swing" checked />
            Schwenkbogen anzeigen
          </label>
          <label id="measure-lock-row" class="measurement-toggle">
            <input type="checkbox" id="measure-lock" checked />
            Angrenzende Räume koppeln
          </label>
          <p id="measure-note" class="helper">Wandhöhe fix: 2800 mm.</p>
        </form>
        <p id="architect-help" class="helper"></p>
      </div>
    </section>

    <footer class="app-footer">
      <p>Große Schaltflächen, klare Sprache und ein Raum nach dem anderen.</p>
    </footer>

    <script src="config.js"></script>
    <script type="module" src="app.js"></script>
  </body>
</html>
